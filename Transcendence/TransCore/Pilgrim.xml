<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>
	
	<Type UNID="&unidPilgrimClass;">
		<Properties>
			<DynamicGlobal id="level">
				(block (
					(level (typGetGlobalData &stDomina; 'level))
					)
					(switch
						;	If we have a level, then that's the level
						
						level
							level
							
						;	If we're a Pilgrim, then we're at least level 1.
						
						(= (obj@ gPlayerShip 'characterClass) &unidPilgrimClass;)
							1
							
						;	Otherwise Nil
						)
					)
			</DynamicGlobal>

			<DynamicGlobal id="levelIcon">
				(block (
					(level (typ@ gType 'level))
					)
					(switch
						(= level 1)
							(resCreateImageDesc &rsSistersRanks; 0 0 256 256)

						(= level 2)
							(resCreateImageDesc &rsSistersRanks; 256 0 256 256)

						(= level 3)
							(resCreateImageDesc &rsSistersRanks; 512 0 256 256)

						(= level 4)
							(resCreateImageDesc &rsSistersRanks; 0 256 256 256)

						(= level 5)
							(resCreateImageDesc &rsSistersRanks; 256 256 256 256)

						(resCreateImageDesc &rsSistersRanks; 512 256 256 256)
						)
					)
			</DynamicGlobal>

			<DynamicGlobal id="sistersRel">
				(or (objGetData gPlayerShip 'sistersAttitude) 0)
			</DynamicGlobal>

			<DynamicGlobal id="xp">
				(typGetGlobalData &stDomina; 'xp)
			</DynamicGlobal>
		</Properties>
		
		<Language>
			<Code id="rankDetails">
				(block (
					(level (typ@ gType 'level))
					)
					(if level
						{
							title: (fmtNoun (typTranslate gType (cat "rank." level)) 1 'titleCapitalize)
							largeIcon: (typ@ gType 'levelIcon)

							details: (list
								{
									title: (typTranslate gType 'labelDominaConnection)
									desc: (typTranslate gType 'rtfValue { 
										value:(fmtNumber (typ@ gType 'xp))
										})
									}
								{
									title: (typTranslate gType 'labelSistersAttitude)
									desc: (typTranslate gType 'rtfValue {
										value: (fmtNumber (typ@ gType 'sistersRel))
										})
									}
								)

							detailsStyle: 'stats
							align: 'bottom
							}
						)
					)
			</Code>
			
			<Text id="rank.1">novice(s)</Text>
			<Text id="rank.2">acolyte(s)</Text>
			<Text id="rank.3">adept(s)</Text>
			<Text id="rank.4">curate(s)</Text>
			<Text id="rank.5">canon(s)</Text>
			<Text id="rank.6">
				(or (typTranslate gType (cat "rank.6." (plyGetGenome gPlayer)))
					(typTranslate gType "rank.6.humanFemale")
					)
			</Text>
			<Text id="rank.6.humanMale">patriarch(s)</Text>
			<Text id="rank.6.humanFemale">matriarch(s)</Text>

			<Text id="labelDominaConnection">Domina XP:</Text>
			<Text id="labelSistersAttitude">Sisters Relationship:</Text>

			<RTF id="rtfValue">{/rtf {/f:LargeBold;/c:#ffe667; %value%}}</RTF>
		</Language>
	</Type>

<!-- RESOURCES -->

	<Image UNID="&rsSistersRanks;"		bitmap="Resources\SistersOfDominaRanks.jpg" bitmask="Resources\SistersOfDominaRanksMask.bmp" loadOnUse="true"/>

</TranscendenceModule>
