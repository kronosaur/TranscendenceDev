<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

<!-- LEVEL 1 -->

	<!-- Level 1: Ablative Armor Coating -->

	<ItemType UNID="&itAblativeArmorCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]ablative armor coating"
			level=				"1"
			value=				"40"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel;"

			description=		"This coating is used to protect a ship's armor against laser and particle beam weapons."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"ablative"

			sortName=			"ablative armor coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+resistDamageClass:laser:50"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is an ablative coating that resists laser and particle damage.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 1: Reactive Armor Coating -->

	<ItemType UNID="&itReactiveArmorCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]reactive armor coating"
			level=				"1"
			value=				"60"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			unknownType=		"&itUnknownBarrel;"
			attributes=			"armorEnhance, humanTech, minorItem"

			description=		"This coating reacts when hit by kinetic or chemical explosives and produces an opposite reaction that protect the underlying armor and hull."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"reactive"

			sortName=			"reactive armor coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+resistDamageClass:kinetic:50"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a reactive coating that resists kinetic and chemical explosion damage.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 2 -->

	<!-- Level 2: Carbon-Weaver Nanos -->

	<ItemType UNID="&itCarbonWeaverNanos;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]carbon-weaver nanos"
			level=				"2"
			value=				"80"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			unknownType=		"&itUnknownBarrel;"
			attributes=			"armorEnhance, humanTech, minorItem"

			description=		"The nanomachines in this paste weave a strong carbon grid through a ship's armor. Armor that has been treated in this way will be stronger and more resistant to damage."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"carbon-weave"

			sortName=			"carbon-weaver nanos, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-3"		enhancement:"+hpBonus:50"	}
					{	criteria:"a L:4-6"		enhancement:"+hpBonus:30"	}
					{	criteria:"a L:7-9"		enhancement:"+hpBonus:20"	}
					{	criteria:"a L:10"		enhancement:"+hpBonus:10"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The coating is composed of nanomachines that strengthen your armor.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 2: Organic Acid -->

	<ItemType UNID="&itOrganicAcid;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]organic acid"
			level=				"2"
			value=				"15"
			mass=				"1000"
			frequency=			"common"
			numberAppearing=	"1d4"
			unknownType=		"&itUnknownBarrel;"
			attributes=			"armorDamage, consumable, humanTech, res"

			description=		"Powerful organic acids such as these are used in various industrial processes. Use with caution: Do not allow contact with a ship's armor or hull."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"acid"

			sortName=			"organic acid, barrel of"
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Events>
			<CanEnhanceItem>
				(block (
					(dstItem (@ gData 'targetItem))
					)
					{
						resultCode: 'damaged
						desc: (itmTranslate gItem 'descUsage {
							useItem: (itmGetName gItem 'article)
							dstItem: (itmGetName dstItem 'noModifiers)
							})
						}
					)
			</CanEnhanceItem>

			<OnEnhanceItem>
				(block (
					(dstItem (@ gData 'targetItem))
					)
					(setq dstItem (objSet@ gSource dstItem 'incHP (- (rollDice 3 6 0))))

					;	If the armor was destroyed, then we remove it too.

					(if (and (not (itm@ dstItem 'installed))
							(= (itm@ dstItem 'hp) 0)
							)
						(block ()
							(objRemoveItem gSource dstItem)

							{
								resultCode: 'damaged
								desc: (itmTranslate gItem 'descResultDestroyed)
								}
							)

						{
							resultCode: 'damaged
							desc: (itmTranslate gItem 'descResult)
							}
						)
					)
			</OnEnhanceItem>
		</Events>

		<Language>
			<Text id="descResult">

				Unfortunately, the barrel contained an organic acid that eats
				through most metals. The armor segment has been damaged.

			</Text>
			<Text id="descResultDestroyed">

				Unfortunately, the barrel contained an organic acid that eats
				through most metals. The armor segment has been destroyed.

			</Text>
			<Text id="descUsage">

				Using organic acid will damage the %dstItem%.

			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 3 -->

	<!-- Level 3: Decon Gel -->

	<ItemType UNID="&itDeconGel;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]decon gel"
			level=				"3"
			value=				"150"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"consumable, humanTech"
			unknownType=		"&itUnknownBarrel;"

			description=		"Decon gel is used to decontaminate radioactive metals, ceramics and other materials. It is ideal for decontaminating a ship's armor and hull."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"decon"

			sortName=			"decon gel, barrel of"
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Events>
			<CanEnhanceItem>
				(switch
					(not (itm@ (@ gData 'targetItem) 'installed))
						{	
							resultCode: 'noEffect 
							}

					(not (objGetCondition gSource 'radioactive))
						{
							resultCode: 'noEffect
							desc: (itmTranslate gItem 'rpg.canUse.notRadioactive)
							}

					{
						resultCode: 'ok
						desc: (itmTranslate gItem 'rpg.canUse.decon)
						}
					)
			</CanEnhanceItem>

			<OnEnhanceItem>
				(block (
					(dstItem (@ gData 'targetItem))
					resultID
					)

					(switch
						(not (itm@ dstItem 'installed))
							{
								resultCode: 'noEffect
								nextScreen: 'exitScreen
								}

						(not (objGetCondition gSource 'radioactive))
							{
								resultCode: 'noEffect
								desc: (itmTranslate gItem 'rpg.useResult.notRadioactive)
								nextScreen: 'exitScreen
								}

						(block ()
							(shpDecontaminate gSource)
							{
								resultCode: 'ok
								desc: (itmTranslate gItem 'rpg.useResult.decon)
								nextScreen: 'exitScreen
								}
							)
						)
					)
			</OnEnhanceItem>
		</Events>

		<Language>
			<Text id="rpg.canUse.decon">

				Using this barrel of gel will decontaminate your ship.

			</Text>
			<Text id="rpg.useResult.decon">

				The barrel was filled with a decontamination gel. Your ship has 
				been decontaminated.

			</Text>
			<Text id="rpg.canUse.notRadioactive">

				Your ship is not radioactive, so the gel will not have any 
				effect.

			</Text>
			<Text id="rpg.useResult.notRadioactive">

				The barrel was filled with a decontamination gel. Since your 
				ship is not radioactive, the gel had no effect.

			</Text>
		</Language>
	</ItemType>

	<!-- Level 3: Particle Resistance Coating -->

	<ItemType UNID="&itParticleResistCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]particle resistance coating"
			level=				"3"
			value=				"100"
			mass=				"1000"
			frequency=			"common"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel;"

			description=		"This coating is used to protect a ship's armor against particle beam weapons."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"particleresist"

			sortName=			"particle resistance coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+resist:particle:50"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a coating that resists particle damage.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 3: Plasteel Nanos -->

	<ItemType UNID="&itPlasteelNanos;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]plasteel nanos"
			level=				"3"
			value=				"200"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			unknownType=		"&itUnknownBarrel;"
			attributes=			"armorEnhance, humanTech, minorItem"

			description=		"The nanomachines in this paste create a hard plasteel shell on top of armor segments."

			useScreen=			"&dsRPGUseItemOnArmor;"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+hpBonus"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The coating is composed of plasteel nanomachines that strengthen your armor.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 3: Reflective Armor Coating -->

	<ItemType UNID="&itReflectiveArmorCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]reflective armor coating"
			level=				"3"
			value=				"160"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem, specialty"
			unknownType=		"&itUnknownBarrel;"

			description=		"This coating is nearly perfectly reflective at all laser weapon wavelengths. A ship's armor coated with this substance will be immune to laser weapons."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"reflective"

			sortName=			"reflective armor coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+reflect:laser"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a mirrored coating that reflects laser beams.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 4 -->

	<!-- Level 4: Anti-Radiation Coating -->

	<ItemType UNID="&itRadiationImmuneCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]anti-radiation coating"
			level=				"4"
			value=				"350"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel;"

			description=		"This borocarbide coating absorbs deadly radiation before it can penetrate your ship's hull."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"radiationimmune"

			sortName=			"anti-radiation coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+immunity:radiation"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The barrel contains a borocarbide paste that resists radiation.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 4: Degenerating Nanos -->

	<ItemType UNID="&itDegeneratingNanos;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]degenerating nanos"
			level=				"4"
			value=				"25"
			mass=				"1000"
			unknownType=		"&itUnknownBarrel;"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorDamage, consumable, defective, humanTech"

			description=		"These nanomachines are used to recycle old ships and armors into their basic components. Use with caution: Do not allow contact with a ship's armor or hull."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"degenerating"

			sortName=			"degenerating nanos, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"-decay"	}
					{	criteria:"a L:11-"		descID:'tooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a nanomachine matrix that dissolves metals and composites.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 4: Radioactive Waste -->

	<ItemType UNID="&itRadioactiveWaste;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]radioactive waste"
			level=				"4"
			value=				"0"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"consumable, humanTech, cannotOrder"
			unknownType=		"&itUnknownBarrel;"

			description=		"This is a titanium barrel filled with low and medium-level radioactive waste."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"radioactive"

			sortName=			"radioactive waste, barrel of"
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Events>
			<CanEnhanceItem>
				(block (
					(dstItem (@ gData 'targetItem))
					(trData {
						dstItem: (itmGetName dstItem 'noModifiers)
						})
					)
					(switch
						(objGetCondition gSource 'radioactive)
							{
								resultCode: 'noEffect
								desc: (itmTranslate gItem 'rpg.canUse.alreadyRadioactive trData)
								}

						(and (itmMatches dstItem "aI") (shpIsRadiationImmune gSource dstItem))
							{
								resultCode: 'noEffect
								desc: (itmTranslate gItem 'rpg.canUse.immune trData)
								}

						(itmMatches dstItem "aI")
							{
								resultCode: 'damaged
								desc: (itmTranslate gItem 'rpg.canUse.contaminateArmor trData)
								}

						{
							resultCode: 'damaged
							desc: (itmTranslate gItem 'rpg.canUse.contaminateCargo trData)
							}
						)
					)
			</CanEnhanceItem>

			<OnEnhanceItem>
				(block (
					(dstItem (@ gData 'targetItem))
					(trData {
						dstItem: (itmGetName dstItem 'noModifiers)
						})
					)
					(switch
						(objGetCondition gSource 'radioactive)
							{
								resultCode: 'noEffect
								desc: (itmTranslate gItem 'rpg.useResult.alreadyRadioactive trData)
								}

						(and (itmMatches dstItem "aI") (shpIsRadiationImmune gSource dstItem))
							{
								resultCode: 'noEffect
								desc: (itmTranslate gItem 'rpg.useResult.immune trData)
								}

						(itmMatches dstItem "aI")
							(block ()
								(shpMakeRadioactive gSource)
								{
									resultCode: 'damaged
									desc: (itmTranslate gItem 'rpg.useResult.contaminateArmor trData)
									nextScreen: 'forceUndock
									}
								)

						(block ()
							(shpMakeRadioactive gSource)
							{
								resultCode: 'damaged
								desc: (itmTranslate gItem 'rpg.useResult.contaminateCargo trData)
								nextScreen: 'forceUndock
								}
							)
						)
					)
			</OnEnhanceItem>
		</Events>

		<Language>
			<Text id="rpg.canUse.alreadyRadioactive">

				Your ship is already contaminated, so opening this barrel will
				have no effect.

			</Text>
			<Text id="rpg.useResult.alreadyRadioactive">

				The barrel contained radioactive waste. Your ship is already
				radioactive; the waste has no further effect.

			</Text>
			<Text id="rpg.canUse.contaminateArmor">

				Opening the barrel of radioactive waste will contaminate your
				ship.

			</Text>
			<Text id="rpg.useResult.contaminateArmor">

				The barrel contained radioactive waste. Your ship has been
				contaminated.

			</Text>
			<Text id="rpg.canUse.contaminateCargo">

				Opening the barrel of radioactive waste will contaminate your
				ship.

			</Text>
			<Text id="rpg.useResult.contaminateCargo">

				The barrel contained radioactive waste which just emptied inside
				your cargo hold. Your ship has been contaminated.

			</Text>
			<Text id="rpg.canUse.immune">

				This %dstItem% is immune to radiation. The barrel will have no 
				effect.

			</Text>
			<Text id="rpg.useResult.immune">

				The barrel contained radioactive waste. Fortunately, your armor
				is immune to radiation. The waste has no effect.

			</Text>
		</Language>
	</ItemType>

	<!-- Level 4: Regenerating Nanos -->

	<ItemType UNID="&itRegeneratingNanos;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]regenerating nanos"
			level=				"4"
			value=				"350"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem, specialty"
			unknownType=		"&itUnknownBarrel;"

			description=		"The nanomachines are able to automatically regenerate any armor. Once treated with this paste an armor segment will continue to regenerate even if damaged further."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"regenerating"

			sortName=			"regenerating nanos, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+regen"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a nanomachine matrix that regenerates the armor segment.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 5 -->

	<!-- Level 5: EMP Immunity Coating -->

	<ItemType UNID="&itEMPImmuneCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]monopole dust"
			level=				"5"
			value=				"700"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"When applied to armor, monopole dust dissipates EMP energy, rendering it harmless."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"EMPimmune"

			sortName=			"monopole dust, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+immunity:emp"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The barrel contains monopole dust, which protects your armor against EMP effects.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 5: Particle Reflect Coating -->

	<ItemType UNID="&itParticleReflectCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]particle-reflect coating"
			level=				"5"
			value=				"400"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem, specialty"
			unknownType=		"&itUnknownBarrel;"

			description=		"This coating reflects particle beams."

			useScreen=			"&dsRPGUseItemOnArmor;"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+reflect:particle"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a coating that reflects particle beams.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 6 -->

	<!-- Level 6: Ion Resistant Coating -->

	<ItemType UNID="&itIonResistCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]ion resistance coating"
			level=				"6"
			value=				"1300"
			mass=				"1000"
			frequency=			"common"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"This coating is used to protect a ship's armor against ion damage."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"ionresist"

			sortName=			"ion resistance coating, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+resist:ion:50"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a coating that resists ion damage.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 6: Meteorsteel Dust -->

	<ItemType UNID="&itShieldInterfereCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]meteorsteel dust"
			level=				"6"
			value=				"200"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorDamage, defective, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"Meteorsteel interferes with most kinds of shield generators."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"shieldresist"

			sortName=			"meteorsteel dust, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"-shieldInterference"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The barrel contains meteorsteel dust.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 7 -->

	<!-- Level 7: Dyon Dust -->

	<ItemType UNID="&itIonEffectImmuneCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]dyon dust"
			level=				"7"
			value=				"2800"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"Dust activated by dyons immunizes armor against ionization effects such as blinding, EMP, and device ionization."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"ioneffectimmune"

			sortName=			"dyon dust, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+immunity:ionEffects"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The barrel contains dyon dust, which immunizes your armor against ionization effects.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 8 -->

	<!-- Level 8: Ion Reflect Coating -->

	<ItemType UNID="&itIonReflectCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]ion-reflect coating"
			level=				"8"
			value=				"5250"
			mass=				"1000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem, specialty"
			unknownType=		"&itUnknownBarrel5;"

			description=		"This coating reflects ion damage."

			useScreen=			"&dsRPGUseItemOnArmor;"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+reflect:ion"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a coating that reflects ion damage.
			</Text>
		</Language>
	</ItemType>

	<!-- Level 8: Ithalium Paste -->

	<ItemType UNID="&itThermoResistCoating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]ithalium paste"
			level=				"8"
			value=				"5250"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"This coating is used to protect a ship's armor against thermonuclear damage."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"thermoresist"

			sortName=			"ithalium paste, barrel of"
			>

		<Properties>
			<Definition id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-10"		enhancement:"+resist:thermo:50"	}
					{	criteria:"a L:11-"		descID:'TooAdvanced	}
					)
			</Definition>
		</Properties>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Language>
			<Text id="rpg.useResultIntro">
				The paste is a coating that resists thermonuclear damage.
			</Text>
		</Language>
	</ItemType>

<!-- LEVEL 9 -->

	<!-- Level 9: Orthosteel Nanos -->

	<ItemType UNID="&itCarbonWeaver2Coating;"
			inherit=			"&baStdPasteBarrel;"
			name=				"[barrel(s) of ]orthosteel nanos"
			level=				"9"
			value=				"9000"
			mass=				"1000"
			frequency=			"uncommon"
			numberAppearing=	"1d4"
			attributes=			"armorEnhance, humanTech, minorItem"
			unknownType=		"&itUnknownBarrel5;"

			description=		"The nanomachines in this paste weave a strong orthosteel grid through a ship's armor. Armor that has been treated in this way will be stronger and more resistant to damage."

			useScreen=			"&dsRPGUseItemOnArmor;"
			data=				"carbon-weave2"

			sortName=			"orthosteel nanos, barrel of"
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="96" imageWidth="96" imageHeight="96"/>

		<Properties>
			<Constant id="rpg.enhancementTable">
				'(
					{	criteria:"a L:1-6"		descID:'TooPrimitive	}
					{	criteria:"a L:7-9"		enhancement:"+hpBonus:50"	}
					{	criteria:"a L:10-12"	enhancement:"+hpBonus:30"	}
					{	criteria:"a L:13-"		descID:'TooAdvanced	}
					)
			</Constant>
		</Properties>

		<Language>
			<Text id="rpg.useResultIntro">
				The coating is composed of nanomachines that strengthen your armor.
			</Text>
		</Language>
	</ItemType>

<!-- DIAGNOSTICS -->

	<Type unid="&diagArmorEnhancements;">
		<Events>
			<OnGlobalRunDiagnostics>
				(block ()

					;	Set up a player ship

					(setq gPlayerShip (sysCreateShip &scSapphirePlayer; Nil &svPlayer;))
					(if (not gPlayerShip)
						(error "Unable to create player ship.")
						)
					(shpOrder gPlayerShip 'hold)

					;	Unit Tests for Item Enhancements

					(diagEval (list

						;	Ablative Armor Coating -----------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itAblativeArmorCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(@ (itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'damageAdj
										)
									'laser)											result:20	}

						{	test:'(@ (itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'damageAdj
										)
									'particle)										result:75	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Particle Resistance Coating ------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itParticleResistCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'damageAdj
										)											
							result: {
								laser:40				kinetic:40
								particle:50 			blast:100
								ion:100					thermo:100
								positron:100 			plasma:100 
								antimatter:100			nano:100 
								graviton:125			singularity:125 
								darkAcid:200			darkSteel:200
								darkLightning:300		darkFire:300
								}
							}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Plasteel Nanos -------------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itPlasteelNanos;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'maxHP
										)											result:88	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itPlasteelNanos;
										)
									'resultCode)									result:'improved	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'maxHP
										)											result:96	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Degenerating Nanos ---------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itDegeneratingNanos;
										)
									'resultCode)									result:'defectOK	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'decay
										)											result:0.2	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Reflective Armor Coating ---------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itReflectiveArmorCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'reflect
										)											result:{ laser:95 }	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Regenerating Nanos ---------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itRegeneratingNanos;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'regen
										)											result:1	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	EMP Immunity Coating -------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itEMPImmuneCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'empImmune
										)											result:True	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Particle Reflect Coating ---------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itParticleReflectCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'reflect
										)											result:{ particle:95 }	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Ion Resistance Coating -----------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itIonResistCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'damageAdj
										)											
							result: {
								laser:40				kinetic:40
								particle:100 			blast:100
								ion:50					thermo:100
								positron:100 			plasma:100 
								antimatter:100			nano:100 
								graviton:125			singularity:125 
								darkAcid:200			darkSteel:200
								darkLightning:300		darkFire:300
								}
							}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Meteorsteel Dust -----------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itShieldInterfereCoating;
										)
									'resultCode)									result:'defectOK	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'shieldInterference
										)											result:True	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Dyon Dust ------------------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itIonEffectImmuneCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'blindingImmune
										)											result:True	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'deviceDamageImmune
										)											result:True	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'deviceDisruptImmune
										)											result:True	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'empImmune
										)											result:True	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Ion Reflect Coating --------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itIonReflectCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'reflect
										)											result:{ ion:95 }	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Ithalium Paste -------------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itThermoResistCoating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										'damageAdj
										)											
							result: {
								laser:40				kinetic:40
								particle:100 			blast:100
								ion:100					thermo:50
								positron:100 			plasma:100 
								antimatter:100			nano:100 
								graviton:125			singularity:125 
								darkAcid:200			darkSteel:200
								darkLightning:300		darkFire:300
								}
							}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Orthosteel Nanos -----------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itLightOrthoSteel;
									)												result:'ignore	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itLightOrthoSteel;;") 0)
										&itCarbonWeaver2Coating;
										)
									'resultCode)									result:'ok	}

						{	test:'(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itLightOrthoSteel;;") 0)
										'maxHP
										)											result:217	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itLightOrthoSteel;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Organic Acid ---------------------------------------

						{	test:'(objAddItem gPlayerShip 
									&itPlasteelPlate;
									)												result:'ignore	}

						{	test:'(@ (objCanEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itOrganicAcid;
										)
									'resultCode)									result:'damaged	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;;") 0)
										&itOrganicAcid;
										)
									'resultCode)									result:'damaged	}

						{	test:'(ls 
									(itm@ 
										(@ (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") 0)
										'hp
										)
									(itm@ &itPlasteelPlate; 'hp)
									)												result:True	}

						{	test:'(enum (objGetItems gPlayerShip "*U +unid:&itPlasteelPlate;") theItem
										(objRemoveItem gPlayerShip theItem)
										)											result:'ignore	}

						;	Decon Gel ------------------------------------------

						{	test:'(shpMakeRadioactive gPlayerShip)					result:True	}

						{	test:'(@ (objCanEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itDeconGel;
										)
									'resultCode)									result:'ok	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itDeconGel;
										)
									'resultCode)									result:'ok	}

						{	test:'(objGetCondition gPlayerShip 'radioactive)		result:Nil	}

						{	test:'(@ (objCanEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itDeconGel;
										)
									'resultCode)									result:'noEffect	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itDeconGel;
										)
									'resultCode)									result:'noEffect	}

						;	Radioactive Waste ----------------------------------

						{	test:'(@ (objCanEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itRadioactiveWaste;
										)
									'resultCode)									result:'damaged	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itRadioactiveWaste;
										)
									'resultCode)									result:'damaged	}

						{	test:'(objGetCondition gPlayerShip 'radioactive)		result:True	}

						{	test:'(@ (objCanEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itRadioactiveWaste;
										)
									'resultCode)									result:'noEffect	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itRadioactiveWaste;
										)
									'resultCode)									result:'noEffect	}

						{	test:'(@ (objEnhanceItem gPlayerShip
										(@ (objGetItems gPlayerShip "aI") 0)
										&itDeconGel;
										)
									'resultCode)									result:'ok	}

						))

					;	Done

					(objDestroy gPlayerShip)
					(setq gPlayerShip Nil)
					)
				
			</OnGlobalRunDiagnostics>
		</Events>
	</Type>

</TranscendenceModule>
